\chapter{Background and Related Work}

\section{A Brief History of the Personal Cloud Term}

In the past years there have been divergent views of the ``Personal Cloud'' concept.  
For example, in \cite{hari2012personal} authors propose an architecture and design
for accessing and sharing computational resources in virtual machines. For them, a
Personal Cloud is a collection of Virtual Machines running on unused computers at the edge.
Another different view focuses on collaborative work \cite{ardissono2009service},  
where a web infrastructure is defined to provide a unified environment
for handling activities and collaborations. Finally, a recent trend \cite{windley}
 goes further and defines the Personal Cloud as a cloud Operating 
System that offers a core set of services around identity, trust, data access and 
even programming models.

In this paper, we focus on Personal Cloud Storage platforms that take care of data
sync and sharing from heterogeneous devices. In fact,  the term ``Personal Cloud'' have
received a lot of attention with the recent research reports from Forrester \cite{forrester}
and Gartner \cite{gartner}. Like us, these reports associate the term Personal Cloud with
online cloud storage services such as Dropbox, Box, or Google Drive among others.

\section{Personal Cloud Systems}

In the last few years, we have seen how the market of cloud storage is growing rapidly. 
Despite the rush to simplify our digital lives, many of the commercial Personal Clouds
in operation today like Dropbox are \textit{proprietary}, and rely on algorithms that are
\textit{invisible} to the research community, and what is even worse, existing open source
alternatives fall short of addressing all the requirements of the Personal Cloud.
Next we discuss the existing open source solutions for the Personal Cloud, namely
SparkleShare, ownCloud and Syncany.

SparkleShare\footnote{\url{http://sparkleshare.org/}} is built on top of Git, using it 
as both its storage and syncing back-end. SparkleShare clients use push notification
to receive changes, and maintain a direct connection with the server over SSH to exchange file data.
When a client is started, it connects to a notification server. The notification server tells the other
clients subscribed to that folder that they can pull new changes from the repository after a user
change. 

Using Git as the storage back-end is a double-edged sword. While Git implements an efficient request
method to download changes from the server (git pull command), avoiding massive metadata exchanges
between server and clients, it is not prepared to process large binary files. Also, this architecture
tied to the Git protocol is also difficult to scale and deploy in cloud environments.

ownCloud\footnote{\url{http://owncloud.org/}} is the most famous open source  Personal Cloud 
and they have an active community. We refer here to the Community Edition of ownCloud, since their enterprise edition is not available to the public. In ownCloud, clients communicate with the server following a \textit{pull} strategy, i.e. clients ask periodically to the server for new changes. There are two types of data traffic: data and metadata. For data exchange, ownCloud uses a REST API; however, metadata traffic is transferred using the WebDAV protocol. 
Because both types of traffic are processed by the same server, data and metadata traffic are completely coupled.

Unfortunately, ownCloud is not an extensible and modular framework like StackSync. In this line, their developer community is mainly working around the web front-end. Although we will devote a subsection to ownCloud in the validation, we can advance that their inefficient pull strategy with massive control overheads is not scalable. Furthermore, their sync flows and data flows are tightly coupled, and they do not even provide basic chunking or deduplication mechanisms. 

Syncany \footnote{\url{http://syncany.org/}} is an open source Personal Cloud developed by Philip Heckel in Java. It is a client-side Java application that can synchronise against a variety of storage back-ends thanks to their extensible plugin model. They also provide extensible mechanisms for chunking and their architecture is elegant, clean and modular.

Although we give much credit to Syncany, proof of that is that the StackSync client is a branch project that evolved 
from Syncany, it presents a number of drawbacks that made us evolve towards the current StackSync architecture. 
The major shortcoming is the lack of scalability of Syncany due to its heavy pull strategy with metadata and
data flows heavily coupled. To support versioning and resolve conflicts, Syncany relies on a metadata file 
that contains the complete history of each individual file, and that is stored in the storage back-end
as a regular file. To determine the most recent version of a file, the Syncany client needs first to
download this metadata file, which grows with each new file modification, severely limiting scalability.

\section{Synchronization Algorithms}

At the core of personal cloud is file sync. Although a rush of online file sync services have
been entering the market during the last years, evidenced by the explosion in popularity of
Dropbox and competitors, little is known about the design and implementation of commercial
sync protocols. According to a recent characterization of Dropbox~\cite{drago2012inside}, file synchronization
is built upon third-party libraries such as librsync, but the role of this library is uncertain
because of the very nature of the rsync algorithm~\cite{tridgell96rsync}. Other popular tools like 
unison~\cite{unison} that use the same basic algorithm suffer from the same deficiencies.

rsync is symmetric, and provides pairwise synchronization between two devices, where the rsync
utility running on each computer must have local access to the entire file. This requirement
poses the first practical limitation to the adoption of rsync because working at the file level
prevents efficient data deduplication. To save storage space and money, services like Dropbox
split files into chunks and store them at multiple nodes on the server side. A straightforward
adaptation of rsync to this context would be piecing together the chunks and reconstructing
whole file at a chosen server and then operate on it. This, unfortunately, would waste massive
intra-cluster bandwidth, deteriorating significantly deduplication efficiency. It is worth
noting here that, although rsync finds chunks of data that occur both in the old file and the
new file, it requires the side acting as a server to compute hashes for all possible alignments
in its file in order to find a match. For this, it needs the whole file.  

In addition, if a single character is modified in each chunk of the old file, then no match
will be found by the server and rsync will be completely useless~\cite{langford01}. To address this limitation,
a number of single-round and multi-round protocols have been proposed in the last ten years. 
Multi-round protocols allow communicating fewer bits in total by using additional communication
rounds; see~\cite{langford01} and~\cite{suel04}. However, the fact of taking multiple passes over files presents evident
disadvantages in terms of protocol complexity, computing and I/O overheads, and communication
latency. Recent single-round protocols~\cite{irmak05}\cite{hao08} bypass this difficulty by using variable-length
content-based chunking~\cite{Muthitacharoen01}. However, since these protocols only synchronize files between two
different machines at a time, they are not directly applicable to Personal Clouds, where file
changes occurring elsewhere are automatically notified to any other device sharing that file. 

There is a large body of work by the OS community that attempts to detect redundancies in order
to reduce storage or transmissions costs, like LFBS~\cite{Muthitacharoen01} and Pastiche~\cite{Cox02}, among others, which
have inspired in one way or another many of today's online cloud storage services. These systems
operate at block level by relying on variable-length content-based chunking, rather than at
file level. Compared with personal cloud applications, distributed file systems pursue a
different objective and can skip implementing some basic functionality in personal clouds like
file version management or the scalable notification of updates as soon as they occur. In fact,
LBFS uses leases in which the server's obligation to inform a client of changes expires after one
minute. The result is that the client will be out of sync once a lease on a file has expired. 
In Dropbox, however, any change on the central storage is advertised as soon as it is made~\cite{drago2012inside}.
For this purpose, the Dropbox client keeps continuously opened a TCP connection to a notification
server, used for receiving information about changes performed elsewhere.

Overall, \textit{providing an efficient and scalable sync protocol} poses a grand challenge for
engineers in charge of building Personal Cloud storage services, due to the intricate
relationships between deduplication, notification and metadata management.

%Making this process scalable is not straightforward, as it involves the intricate interaction of many components. For
%instance, to improve scalability, Personal Clouds use numerous techniques to only transfer those parts of the
%files that have been modified since the last synchronization. To achieve this, these systems internally do not
%use the concept of files, but split every file into chunks, each treated as an independent object. If a chunk
%is already stored in the storage servers, it is not transferred, saving traffic and storage. However, working
%at the chunk level requires the sync process to manage more metadata than operating at the file level, making
%it more critical the way metadata is internally processed. Further, as the amount of metadata is directly proportional
%to the number of chunks, the efficiency of the chunking algorithm impacts the performance of file syncing.

Analogously, to efficiently maintain the consistency of files, any change performed elsewhere must be advertised 
as soon as they occur to reduce conflicts~\cite{drago2012inside}, in particular, when a file is susceptible to
be modified by more than one client at the same time. This requires the sync process to operate quickly to
commit changes along with an efficient notification service to inform clients about file modifications. 

Therefore, a practical implementation of an open Personal Cloud requires making a big effort. In 
this context, the CloudSpaces project (\url{ http://cloudspaces.eu/}) , which has been initiated
in the frame of European Commission's FP7-ICT programme, is attempting to fill this gap. Concretely,
as far as we know, we are the first to propose an open architecture for Personal Clouds. It is worth
noting here that although at the time of this writing, our reference implementation includes the
software necessary to run a basic Personal Cloud, in this work we put more emphasis on the sync protocol, which
is the core service of any Personal Cloud. Since a serious impediment to progress in cloud storage
research is the lack of a standard framework, we hope to provide a useful framework for developing
and testing new ideas in a relatively easy manner.

In summary, we contribute the following:

\begin{enumerate}
\item Extensible framework with a plugin-based architecture for  storage back-ends, metadata-back-ends,
 communication middleware, and chunking  algorithms.
\item Reference open source implementation called StackSync, which is based on a high-performance messaging middleware 
for asynchronously dispatching incoming and outgoing push notifications.
\item Benchmarking and validation framework for Personal Clouds, which provides trace generators and test scripts. 

\end{enumerate}


The rest of the article is structured as follows. We review related work in Section 2. We give an
overview of the main technical ingredients of a Personal Cloud in Section 3. We introduce our 
open architecture in Section 4. In Section 5, we evaluate our reference implementation and conclude
in Section 6.


\section{From the Personal Computer to the Personal Cloud}

In the last few years, the Personal Computer (PC) paradigm has been slowly waning as traditional PCs have been outnumbered by other devices like smartphones and tablets. The traditional PC as the users' unique device including a box with a monitor, mouse, and keyboard is coming to an end.  In the next years, users will access their digital lives from a variety of heterogeneous devices like TVs, smartphones, tablets, laptops or even wearable computers.


This change has profound implications in the way we interact with information. The Personal Computer implies that users have absolute control of their device's hardware and software.  What it is more important, user's personal data remains private as a direct consequence of  PC's local storage.  But this recent multi-device approach clearly implies access to Cloud resources that may compromise the privacy and control of user's  information.


As stated in the title of this section, we refer to this new multi-device model as the Personal Cloud. The Personal Cloud model defines a ubiquitous storage facility enabling the unified and location-agnostic access to information flows from any device and application.  Ubiquitous free Cloud services like GMail, Facebook, Flickr, Dropbox, and many others permit users to access their personal information from any device and location.  But we pay a price for these services: the loss of control over our own data. In particular, the business models of most of these Cloud services relies on the monetization of user's data.


On the other hand, several Cloud services (e.g. Wuala, MEGA, SpiderOak, Bitcasa, etc.) have emerged allowing the user to reclaim control over his data through client-side encryption. With most of these providers, the user further has the choice between keeping his data encrypted or sharing it in plain form with others. The latter option has the advantage of allowing data to be processed at the server side, thus enabling additional services (e.g. document editing, printing). Nevertheless, this approach of specifying a privacy policy per group of files is not convenient for most of the users, and this partially justifies the small user base of these services. The current solutions for privacy preservation are analogous to antivirus programs where the user has to scan each file or group of files manually and individually before using them. Most users would prefer to have the security analysis run in the most automatic and transparent manner possible. Along these lines, there are no Cloud solutions ensuring that the privacy of user's data is automatically guaranteed, with minimal intervention on his side.


In addition, we are facing a decisive battle to decide who is going to store our data in the next years.  In a recent report, Forrester research forecasts a market of \$12 billion in the US in paid subscriptions to personal storage services by 2016~\cite{forrester}. In this line, we are witnessing a generalized battle of Cloud providers to store our information: ranging from Dropbox, Box, SugarSync and Ubuntu One, to Apple's iCloud, Microsoft Skydrive and Google's Drive. These Store Wars represent  a battle for supremacy that create walled gardens environments favouring vendor lock-in and precluding interoperability.


But the future is not that bleak. The Personal Cloud model with all its advantages can be realized without relinquishing our privacy or requiring a significant effort and expertise.  The CloudSpaces project aims to create the next generation of Personal Cloud where all users, regardless of their technical expertise, will retake control of their information. In the next sections we will try to present a clear definition of the Personal Cloud concept, and we will shed light on the current state of the art about Personal Clouds on the market.



\section{Definition of Personal Cloud}

First of all, we must propose a definition and classification for the concept of Personal Cloud.



{
%\def\arraystretch{2}

\noindent\noindent\begin{tabularx}{\textwidth}{|m{0.9735\textwidth}|}
\hline %horizontal line
 \rowcolor[gray]{.8}
\textbf{3S Personal Cloud definition:} The Personal Cloud is a unified digital  locker for users' personal data offering three key services: Storage, Synchronization and Sharing.  On the one hand, it must provide redundant and trustworthy Cloud data storage for users' information flows irrespective of their type. On the other hand, it must provide syncing and file exploring capabilities in different heterogeneous platforms and devices. And finally, it must offer fine-grained information sharing to third-parties (users and applications).\\ \hline
\end{tabularx}


\bigskip
We also include two external definitions:

Respect Network's definition~\cite{respectnetwork}: A Personal Cloud is a Cloud-based virtual computer that combines event processing and personal data. Personal Clouds serve as the online representative of an entity, often a person. Personal Clouds have an operating system that runs applications, processes events, and manages data on behalf of and under the direct control of their owners. 


PC Magazine Encyclopedia's definition~\cite{pcmag}: A small server in a home or small business network that can be accessed over the Internet. Designed for sharing photos and videos, Personal Clouds enable viewing and streaming from any Internet-connected personal computer and quite often from major smartphones. Although Personal Clouds function in a similar manner to any private Cloud set up in a company, their primary feature is easy installation for the average personal computer user.

As we can see from the previous definitions there are still divergent views of what it is a Personal Cloud. Probably the most restrictive one is the PC Magazine definition which reduces the term to home-based small personal server resources.  On the contrary, the Respect Network definition is the most ambitious definition considering the term a Cloud-based virtual computer with both processing and data management capabilities. 

The CloudSpaces 3S definition aims to provide a least common denominator for Personal Cloud Services. It goes further than classical Storage as a Service (STaaS) models because it mandates syncing and sharing as essential services. But it does not include computing or applications like the model envisioned by the Respect Network. In our model, applications will interact with the Personal Cloud thanks to interoperability standards.


The actual implementation of the Personal Cloud can be realized using different architectures such as a public Cloud, a private Cloud, or even a hybrid Cloud. Furthermore, the name â€œPersonalâ€ should not be misunderstood: the Personal Cloud is not only aimed for end-userâ€™s private digital information, but it can also refer to enterprise data and professional activities.


We cannot say that a Personal Cloud can be classified as  IaaS (Infrastructure as a Service), SaaS (Software as a Service), or PaaS (Platform as a Service), because we consider that the three of them can also be included in the Personal Cloud model. For example, providers such as Dropbox, U1 or Box tend to offer storage APIs to third party applications (IaaS). And such providers also offer web-based rich interfaces to their stores (SaaS). Finally, although less prevalent today, Personal Clouds could offer richer PaaS services to third-party applications willing a more flexible interaction with their data (e.g. U1DB data store or the â€œCloudletsâ€ concept~\cite{openi}).


Finally, depending on their implementation of sync and share features, we can classify Personal Clouds as oriented to \textbf{content collection},  \textbf{distribution}, or  \textbf{collaboration}. Collaborative Personal Clouds must provide advanced sync (versioning, conflict resolution) and sharing (access  control) capabilities to permit treating Personal Cloud spaces as collaborative workspaces. Here, we summarise these three purposes.

....
....

....
....

\section{State of the art review of existing Personal Clouds}


Before beginning with Personal Cloud comparison we will introduce some important concepts and provide definitions of the main aspects that will be analysed. To clarify, we will classify features into the following sections:

\begin{itemize}
\item \textbf{Storage}. We will take into account features such as Personal Cloud's infrastructure or whether they use advanced techniques such as data deduplication.
\item \textbf{Sync}. In this part we will describe and analyse aspects related to file synchronisation such as P2P syncing or file versioning. 
\item \textbf{Share}. Different types of data sharing and collaboration will be considered. Including privacy-aware data sharing.
\item \textbf{Privacy}. We will analyse the type of encryption used by Personal Clouds while files are being transmitted and when they are at rest. In addition we will analyse authentication protocols and software licenses used.
\item \textbf{Platforms}. We will see the tools provided to allow external access to users' data and the platforms supported by each Personal Cloud.
\end{itemize}


\subsection{Storage}

Personal Cloud companies offer sophisticated storage services to end-users and enterprises by making use of raw storage. This \textbf{storage backend} is often provided by data center owners such as Amazon or Rackspace. However, some other Personal Clouds do have their own infrastructure and do not outsource this task.

Therefore, we can classify Personal Clouds depending on their \textbf{nature}: public, private or hybrid. We call Public Clouds the ones that whose services and infrastructure are offered off-site over the Internet. In contrast, a Private Cloud is one in which the services and infrastructure are maintained on a private network. Additionally, Hybrid Clouds include a variety of public and private options with multiple providers. For instance, a company could keep sensible and business critical information in their Private Cloud, while using a Public Cloud to store the rest of their data.

Personal Clouds usually offer their services based on a Freemium business model~\footnote{Freemium is a business model by which a product is offered free of charge, but a premium product with advanced features at a charge.}. In other words, a product is offered free of charge, but a premium product with advanced features is offered at a charge. Therefore, the storage quota offered for free is an important feature that users consider.

Some Personal Clouds apply restrictions on the \textbf{maximum file size}, which can vary depending on whether the file is synced on the desktop application or uploaded through the web interface, or even the type of account.

In order to optimize the storage and bandwidth consumed when maintaining different versions of files some Personal Clouds use \textbf{data deduplication} techniques. Using data deduplication, when a user is to upload a file that already exists in the Cloud, he will not need to actually transfer it. Instead, a logical relation between the file and the user will be created. This technique can be applied to different scopes (i.e. across all files in the system, across user's files, etc.) depending on the privacy policy.

Such popular services need to scale well in order to be successful. A system is said to be \textbf{scalable} when it is able to accommodate a significant growth in its amount of work and continue its normal functioning. This feature is normally inherited by the storage backend that underlies the service.



\begin{table}
\begin{center}
    \begin{tabular}{ | p{3.4cm} | p{2.0cm} | p{2.6cm} | p{2.6cm} | p{1.0cm} | p{1.0cm} | }
    \hline
    \rowcolor[gray]{0.8}

	\textbf{Personal Cloud} &
	\begin{sideways}\textbf{Nature}\end{sideways} &
	\begin{sideways}\textbf{Free storage}\end{sideways} &
	\begin{sideways}\textbf{File size limit}\end{sideways} & 
	\begin{sideways}\textbf{Deduplication}\end{sideways} & 
	\begin{sideways}\textbf{Scalable}\end{sideways} \\ \hline

	\textbf{Google Drive} &
	Private &
	5 GB &
	10 GB &
	No &
	Yes \\ \hline

	\textbf{Dropbox} &
	Public (Amazon S3) &
	2 GB &
	300 MB (web only) &
	Yes &
	Yes \\ \hline
	
	\textbf{Ubuntu One} &
	Public (Amazon S3) &
	5 GB &
	Unlimited &
	Yes &
	Yes \\ \hline
	
	\textbf{Box} &
	Private &
	5 GB & 
	250 MB (free acounts) &
	? &
	Yes \\ \hline
	
	\textbf{SugarSync} & 
	Public (Carpathia Hosting) &
	5 GB &
	Unlimited &
	? &
	Yes \\ \hline
	
	\textbf{Cubby} &
	Private &
	5 GB &
	2 GB (web only) &
	No &
	Yes \\ \hline
	
	\textbf{SkyDrive} & 
	Private &
	7 GB &
	2 GB (client), 300 MB (web) &
	? &
	Yes \\ \hline

	\textbf{iCloud} &
	Private &
	5 GB &
	? &
	? &
	Yes \\ \hline
	
	\textbf{SpiderOak} & 
	Private &
	2 GB &
	Unlimited &
	Yes &
	Yes \\ \hline

	\textbf{Wuala} &
	Private &
	5 GB &
	40 GB &
	Yes &
	Yes \\ \hline
	
	\textbf{ownCloud} &
	Private &
	Customizable &
	Customizable &
	No &
	No \\ \hline

    \end{tabular}
    \\[10pt]
    \caption{Personal Cloud comparison on storage features}
    \label{tab:pc_storage}
\end{center}
\end{table}

As we can see in table~\ref{tab:pc_storage}, most of the analysed Personal Clouds use their own storage backend, others such as Dropbox or Ubuntu One rely on well-known storage providers such as Amazon to store users' data. Most Personal Clouds allow users to increase their free storage by referring friends to their service. We can also observe that there is a huge difference on the limit set to file sizes. OwnCloud lets administrators assign custom values for storage space and file size limit.

As far as we know, only Dropbox, SpiderOak, Ubuntu One and Wuala implement data deduplication mechanisms, but they differ on the scope where this technique is applied. Whereas Dropbox, Ubuntu One and Wuala deduplicate data across all users, SpiderOak only does it across a single user data due to privacy concerns. We assume that, due to the design of the storage backend, all services are scalable in the sense that they can fetch more resources as the demand increases. We don't consider ownCloud to be scalable since it is designed as a local repository.

\subsection{Sync}
One of the key aspects of Personal Clouds is \textbf{file synchronization} (or syncing). We understand it as a two-way file synchronization, which means that a locally modified file is updated in each location this file is present. In addition, if a file is modified remotely, these changes will be automatically updated locally, with the purpose of keeping every copy of a file identical in all locations.

In this line, some companies also implement \textbf{P2P file syncing}. We understand P2P file syncing as the ability to keep two or more files identical in different locations without resorting to a central service. It allows companies to reduce the outgoing traffic from the data center, which translates in cost savings. It is also useful for users that want to store the same files on two or more computers avoiding the need to resort to the server.

Some solutions enable users to sync files from \textbf{multiple folders} throughout their file system. For instance, when syncing you will need to tell the application that "Folder A" on your laptop should sync with "Folder B" on your desktop. Contrarily, others solutions only sync files that are stored inside a specific folder created for that purpose.

Another interesting feature is \textbf{versioning}. File versioning allows users to restore previous versions of a file. Personal Clouds may limit the \textbf{version history} to a maximum number of revisions to be kept in the system or a specific period of time. For instance, a company could claim storing all versions of a file done in the last 30 days. This may also vary depending upon whether it is a free account or not.


{
\def\arraystretch{1.5}

\begin{table}
\begin{center}
    \begin{tabular}{ | p{3.3cm} | p{1.4cm} | p{1.4cm} | p{2.4cm} | p{1.4cm} | p{2.9cm} | }
    \hline
    \rowcolor[gray]{0.8}

	\textbf{Personal Cloud} &
	\begin{sideways}\textbf{File syncing}\end{sideways} &
	\begin{sideways}\textbf{Multiple folder syncing}\end{sideways} &
	\begin{sideways}\textbf{P2P syncing}\end{sideways} & 
	\begin{sideways}\textbf{Versioning}\end{sideways} & 
	\begin{sideways}\textbf{Versions saved}\end{sideways} \\ \hline

	\textbf{Google Drive} &
	Yes &
	No &
	No &
	Yes &
	30 days or 100 versions \\ \hline

	\textbf{Dropbox} &
	Yes &
	No &
	LAN restricted &
	Yes &
	30 days \\ \hline
	
	\textbf{Ubuntu One} &
	Yes &
	Yes &
	No &
	No &
	--- \\ \hline
	
	\textbf{Box} &
	Yes &
	No & 
	No &
	Yes &
	10 \\ \hline
	
	\textbf{SugarSync} & 
	Yes &
	Yes &
	No &
	Yes &
	2 (free), 5 (paid) \\ \hline
	
	\textbf{Cubby} &
	Yes &
	Yes &
	Yes &
	Yes &
	Unlimited \\ \hline
	
	\textbf{SkyDrive} & 
	Yes &
	No &
	No &
	Yes &
	25 \\ \hline

	\textbf{iCloud} &
	Yes &
	No &
	No &
	No &
	--- \\ \hline
	
	\textbf{SpiderOak} & 
	Yes &
	Yes &
	No &
	Yes &
	Unlimited \\ \hline

	\textbf{Wuala} &
	Yes &
	Yes &
	No &
	Yes &
	10 \\ \hline
	
	\textbf{ownCloud} &
	Yes &
	? &
	No &
	Yes &
	? \\ \hline

    \end{tabular}
    \caption{Personal Cloud comparison on syncing features}
    \label{tab:pc_syncing}
\end{center}
\end{table}
}

About half of the Personal Clouds implement multiple folder syncing. Cubby implements a protocol called \textit{DirectSync}~\cite{directsync} that bypasses the Cloud by using P2P technology for syncing files. Dropbox also has some sort of P2P syncing protocol \textit{LAN sync}~\cite{lansync} that syncs different computers inside the same local network. Again, there is a big discordance about the policy used when storing the file history.




\subsection{Share}


Sharing is an attractive feature that most of Personal Clouds provide, whether it is with users inside the service or with people outside the Personal Cloud. \textbf{Internal sharing} is usually offered as an integrated functionality in the user interface. Whereas \textbf{public sharing} is commonly offered as direct HTTP links that allow other users to access to certain files or folders.

The sharing infrastructure must ensure \textbf{privacy-aware data sharing} from other Personal Clouds. It must also guarantee controlled access to external users and applications of oneâ€™s personal data.

\textbf{Real-time collaboration} allows multiple users to edit a file at the same time. So users can see where in the document or file a particular editor is currently writing.

\textbf{Interoperability} between Cloud providers gives users a sense of control and ownership over their Personal Cloud. Since the Personal Cloud is the mediation point between users and services, being able to easily withdraw from a particular Cloud provider increases ownership and control; the Personal Cloud feels truly personal, because the user is not â€œlocked inâ€ to one provider.


{
\def\arraystretch{1.5}

\begin{table}
\begin{center}
    \begin{tabular}{ | p{3.3cm} | p{1.5cm} | p{1.5cm} | p{1.5cm} | p{1.5cm} | p{1.5cm} | }
    \hline
    \rowcolor[gray]{0.8}

	\textbf{Personal Cloud} &
	\begin{sideways}\textbf{Internal sharing}\end{sideways} &
	\begin{sideways}\textbf{Public file sharing}\end{sideways} &
	\begin{sideways}\textbf{Privacy-aware data sharing}\end{sideways} & 
	\begin{sideways}\textbf{Collaborative editing}\end{sideways} & 
	\begin{sideways}\textbf{Interoperability}\end{sideways} \\ \hline

	\textbf{Google Drive} &
	Yes &
	Yes &
	No &
	Yes &
	No \\ \hline

	\textbf{Dropbox} &
	Yes &
	Yes &
	No &
	No &
	No \\ \hline
	
	\textbf{Ubuntu One} &
	Yes &
	Yes &
	No &
	No &
	No \\ \hline
	
	\textbf{Box} &
	Yes &
	Yes &
	No &
	No &
	No \\ \hline
	
	\textbf{SugarSync} & 
	Yes &
	Yes &
	No &
	No &
	No \\ \hline
	
	\textbf{Cubby} &
	Yes &
	Yes &
	No &
	No &
	No \\ \hline
	
	\textbf{SkyDrive} & 
	Yes &
	Yes &
	No &
	Yes &
	No \\ \hline

	\textbf{iCloud} &
	Yes &
	No &
	No &
	No &
	No \\ \hline
	
	\textbf{SpiderOak} & 
	Yes &
	Yes &
	Yes &
	No &
	No \\ \hline

	\textbf{Wuala} &
	Yes &
	Yes &
	Yes &
	No &
	No \\ \hline
	
	\textbf{ownCloud} &
	Yes &
	? &
	No &
	No &
	No \\ \hline

    \end{tabular}
    \caption{Personal Cloud comparison on sharing features}
    \label{tab:pc_sharing}
\end{center}
\end{table}
}


In table~\ref{tab:pc_sharing} we can see that only SpiderOak is considered to implement a privacy-aware data sharing scheme. SpiderOak allows users to password protect all their \textit{ShareRooms}\footnote{\url{https://spideroak.com/Online_File_Share}} so that only the people they want to give access to their data can view or download their shared files. Each share room has its own private, secure URL so users can easily share them with only the people they want.


Only Google Drive and SkyDrive let multiple users collaborate simultaneously on the same file from any computer. When someone makes changes to a document, the other person can see the changes in real-time and respond to the edits immediately.

Today, no Personal Cloud provides interoperability with other platforms.


\subsection{Privacy}


Personal Clouds must ensure that user data is not accessed by third-parties and only authenticated users are granted access. Some companies use standard \textbf{authentication protocols} such as OAuth~\cite{oauth}, others opt for using their own mechanisms.

As a security measure, some companies store user data encrypted. Many Personal Clouds can provide \textbf{server-side encryption}; meaning that users delegate to the Cloud the task of protecting their files and managing their keys. As an alternative, \textbf{client-side encryption} allows users to encrypt their data before it is transmitted to the server. So the user is responsible for managing the keys and the service provider is unable to decrypt their data, adding an extra layer of security.

Besides the fact of having the files secured when they are at rest in the server, it is also essential to assure their privacy when they are being transmitted to and from the server. Personal Clouds usually use \textbf{HTTPS} to communicate to their services either from the desktop application or other tools such as the REST APIs or the web interface.

Services and applications offered by Personal Clouds are released in a variety of \textbf{licenses} in order to govern their use and redistribution. Licenses grant rights and impose restrictions on the use of software. Software licenses can generally be fit into the following categories: proprietary licenses and free and open source. The significant difference that distinguishes them is the terms which state whether or not an end user can further distribute or copy the software.


{
\def\arraystretch{1.5}

\begin{table}
\begin{center}
    \begin{tabular}{ | p{3.3cm} | p{2.5cm} | p{1.2cm} | p{1.9cm} | p{1.2cm} | p{3.8cm} | }
    \hline
    \rowcolor[gray]{0.8}

	\textbf{Personal Cloud} &
	\begin{sideways}\textbf{Authorization protocol}\end{sideways} &
	\begin{sideways}\textbf{Client-side encryption}\end{sideways} &
	\begin{sideways}\textbf{Server-side encryption}\end{sideways} & 
	\begin{sideways}\textbf{Secure channel (HTTPS)}\end{sideways} &
	\begin{sideways}\textbf{License}\end{sideways} \\ \hline
	
	\textbf{Google Drive} &
	OAuth 2.0 &
	No &
	No &
	Yes &
	Proprietary \\ \hline

	\textbf{Dropbox} &
	OAuth 1.0 &
	No &
	Yes (AES 256-bit) &
	Yes &
	Proprietary \\ \hline
	
	\textbf{Ubuntu One} &
	OAuth 1.0 &
	No &
	No &
	Yes &
	Proprietary (server); GPLv3 (client) \\ \hline
	
	\textbf{Box} &
	OAuth 2.0 &
	No &
	Yes (AES 256-bit) &
	Yes &
	Proprietary \\ \hline
	
	\textbf{SugarSync} & 
	Custom. Token-based &
	No &
	Yes (AES 128-bit) &
	Yes &
	Proprietary \\ \hline
	
	\textbf{Cubby} &
	--- &
	No &
	Yes (AES 256-bit) &
	Yes &
	Proprietary \\ \hline
	
	\textbf{SkyDrive} & 
	OAuth 2.0 &
	No &
	Yes &
	Yes &
	Proprietary \\ \hline

	\textbf{iCloud} &
	--- &
	No &
	Yes (AES 128-bit) &
	Yes &
	Proprietary \\ \hline
	
	\textbf{SpiderOak} & 
	HTTP basic authentication &
	Yes &
	--- &
	Yes &
	Proprietary; GPLv3 (some tools) \\ \hline

	\textbf{Wuala} &
	--- &
	Yes &
	--- &
	Yes &
	Proprietary \\ \hline
	
	\textbf{ownCloud} &
	--- &
	No &
	Yes &
	Yes &
	AGPLv3 \\ \hline

    \end{tabular}
    \caption{Personal Cloud comparison on privacy features}
    \label{tab:pc_privacy}
\end{center}
\end{table}
}

As we observe in Table~\ref{tab:pc_privacy}, most Personal Clouds implement the OAuth protocol on their API services, either the 1.0 or 2.0 version. Others like SugarSync use their own authentication mechanisms. In general terms, a user makes a call providing his credentials to obtain a refresh token. Next, the user will use this refresh token to obtain an access token that will grant access to the user's resources. As the access token has an expiry date, the user will have to use the refresh token periodically to extend its lifetime.

Very few Personal Clouds provide built-in client-side encryption. From the ones analysed in this comparison, only SpiderOak and Wuala encrypt files locally on the device before they are uploaded. Therefore, no one not explicitly authorized by the user can see their data, not even the storage provider. As a side effect, it is impossible to recover the password in case the user forgets it.

Unanimously, all services establish a secure channel between user's computer and the storage provider before data is transmitted. That way, no one can eavesdrop on the transfer.

Only ownCloud is fully available in a free open source license. Ubuntu One, though, provides its client software and protocol libraries as open source. SpiderOak provides only a set of tools under GPLv3 license.



\subsection{Platforms}


In order to access to user data from an external application, Personal Clouds must implement an application programming interface (API). Providing a \textbf{public API} allows developers to integrate their application on top of the storage system. When used in the web environment, an API is typically defined as a set of HTTP request messages and XML or JSON response messages, also known as REST API.

Another way to allow external access to user data is through the \textbf{WebDAV protocol}. It provides a framework for users to create, change and move their documents. Most current operating systems provide built-in support for WebDAV.

Being able to access to users' stored data from a web browser is an essential functionality. \textbf{Web interfaces} typically allow users to manage their files (move, delete, upload, download, etc) and access to extra tools such as generating public links. Additionally, it is also important to provide \textbf{clients} for as much operating systems as possible to allow access to users regardless of their devices.


{
\def\arraystretch{1.5}

\begin{table}
\begin{center}
    \begin{tabular}{ | p{3.0cm} | p{0.9cm} | p{0.9cm} | p{0.9cm} | p{0.9cm} | p{0.9cm} | p{0.9cm} | p{0.9cm} | p{0.9cm} | p{0.9cm} | p{0.9cm} | }
    \hline
    \rowcolor[gray]{0.8}

	\textbf{Personal Cloud} &
	\begin{sideways}\textbf{REST API}\end{sideways} &
	\begin{sideways}\textbf{WebDAV support}\end{sideways} &
	\begin{sideways}\textbf{Web interface}\end{sideways} & 
	\begin{sideways}\textbf{Windows client}\end{sideways} &
	\begin{sideways}\textbf{OS X client}\end{sideways} &
	\begin{sideways}\textbf{Linux client}\end{sideways} &
	\begin{sideways}\textbf{Android client}\end{sideways} &
	\begin{sideways}\textbf{iOS client}\end{sideways} &
	\begin{sideways}\textbf{Windows Phone client}\end{sideways} &
	\begin{sideways}\textbf{BlackBerry client}\end{sideways} 	\\ \hline

	\textbf{Google Drive} &
	Yes &
	No &
	Yes &
	Yes &
	Yes &
	No &
	Yes &
	Yes &
	No &
	No \\ \hline

	\textbf{Dropbox} &
	Yes &
	No &
	Yes &
	Yes &
	Yes &
	Yes &
	Yes &
	Yes &
	No &
	Yes \\ \hline
	
	\textbf{Ubuntu One} &
	Yes &
	No &
	Yes &
	Yes &
	Yes &
	Yes &
	Yes &
	Yes &
	No &
	No \\ \hline
	
	\textbf{Box} &
	Yes &
	No &
	Yes &
	Yes &
	Yes &
	No &
	Yes &
	Yes &
	Yes &
	Yes \\ \hline
	
	\textbf{SugarSync} & 
	Yes &
	No &
	Yes &
	Yes &
	Yes &
	No &
	Yes &
	Yes &
	No &
	Yes \\ \hline
	
	\textbf{Cubby} &
	No &
	Yes &
	Yes &
	Yes &
	Yes &
	No &
	Yes &
	Yes &
	No &
	No \\ \hline
	
	\textbf{SkyDrive} & 
	Yes &
	No &
	Yes &
	Yes &
	Yes &
	No &
	Yes &
	Yes &
	Yes &
	No \\ \hline

	\textbf{iCloud} &
	Yes &
	No &
	Yes &
	Yes &
	Yes &
	No &
	No &
	Yes &
	No &
	No \\ \hline
	
	\textbf{SpiderOak} & 
	Yes &
	No &
	Yes &
	Yes &
	Yes &
	Yes &
	Yes &
	Yes &
	No &
	No \\ \hline

	\textbf{Wuala} &
	Yes. Limited &
	No &
	Yes &
	Yes &
	Yes &
	Yes &
	Yes &
	Yes &
	No &
	No \\ \hline
	
	\textbf{ownCloud} &
	No &
	Yes &
	Yes &
	Yes &
	Yes &
	Yes &
	Yes &
	Yes &
	No &
	No \\ \hline
    \end{tabular}
    \caption{Personal Cloud comparison on privacy features}
    \label{tab:pc_platform}
\end{center}
\end{table}
}

Wuala provides a limited API only supporting GET operations, it does not include any login or write facilities. Cubby and ownCloud, which do not provide a REST API, implement support for the WebDAV protocol. Though, Cubby has certain limitations such as not being able to move or rename files.

All analysed Personal Clouds have a web interface and most of them have clients for the main operating systems and mobile devices, which allow users to easily interact with their files. However, iCloud is mainly restricted to Apple's products.